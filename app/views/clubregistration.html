<form id="clubregistration" name="clubregistration" class="form-horizontal">
  <div data-ng-controller="ClubRegistrationHistoryCtrl">
    <div data-ng-show="regstate.done">
      <div class="jumbotron">
        <h1>Thank you!</h1>
        <p>You will be contacted in the next few days about the status of your organization.</p>
      </div>
    </div>
    <div data-ng-hide="regstate.done">

      <h2>Organization History</h2>

      <div class="row">
        <div class="col-lg-10 col-lg-offset-2 col-md-10 col-md-offset-2 col-sm-10 col-sm-offset-2">
          <div data-ng-hide="regstate.history">
            <p>Has your organization existed on campus before this year?</p>
            <div data-tag-select="" data-radio="true" data-tags="history.rereg" data-ng-model="history.hasHistory" data-cols="6"></div>
          </div>
          <div data-ng-show="history.hasHistory == 'Yes'">
            <p data-ng-hide="regstate.history">Please search for your club to continue registration.</p>
            <p data-ng-show="regstate.history">You are re-registering an existing organization named</p>
            <div class="input-group">
              <input autocomplete="off" type="text" id="oldname" class="form-control" placeholder="Type here to search" data-ng-model="history.search" data-ng-disabled="regstate.history" data-typeahead="club.fullname for club in sdrdata.clubs | filter:$viewValue | limitTo:20">
              <span class="input-group-btn" data-ng-hide="regstate.history">
                <a href="javascript:void(0)" class="btn btn-primary" data-ng-click="history.confirm()">Confirm</a>
              </span>
              <span class="input-group-btn" data-ng-show="regstate.history">
                <a href="javascript:void(0)" class="btn btn-success" data-ng-click="history.unconfirm()">Undo</a>
              </span>
            </div>
            <p class="help-block" data-ng-hide="regstate.history">Try searching for the full name as well as any acronyms.</p>
          </div>
          <div data-ng-show="history.hasHistory == 'No'">
            <p>You are registering a new organization.  Please be aware that you should have already met with Club Council before filling out this form.</p>
            <span data-ng-hide="regstate.history">
              <a href="javascript:void(0)" class="btn btn-primary" data-ng-click="history.confirm()">Confirm</a>
            </span>
            <span data-ng-show="regstate.history">
              <a href="javascript:void(0)" class="btn btn-success" data-ng-click="history.unconfirm()">Undo</a>
            </span>
          </div>
        </div>
      </div>
      <div class="row" data-ng-hide="regstate.history">
        <div class="col-lg-10 col-lg-offset-2 col-md-10 col-md-offset-2">
          <p class="help-block" data-ng-hide="regstate.history">The rest of the form will show after you complete this section.</p>
        </div>
      </div>


    <div data-ng-show="regstate.history">
    <hr>

      <h2>About Your Organization</h2>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="6" label="Full Name" elementid="fullname" data-help="No acronyms or abbreviations.">
        <input type="text" id="fullname" name="fullname" class="form-control" placeholder="Full Name of Organization" data-ng-model="registration.fullname" data-required>
        <div class="alert alert-danger" ng-show="(clubregistration.fullname.$dirty || regstate.triedSubmit) && clubregistration.fullname.$error.required">
          <p>Please enter your club's full name.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="2" label="Short Name" elementid="shortname" data-help="Many student organizations already have a well-known acronym or shortened form; please enter it or make one up.">
        <input type="text" id="shortname" name="shortname" class="form-control" placeholder="ABC" data-ng-model="registration.shortname">
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="4" label="Address" elementid="address" data-help="Do not use your personal ASU BOX.">
        <input type="text" id="address" name="address" class="form-control" placeholder="ASU PO Box or Advisor's Office Address" data-ng-model="registration.address" data-required>
        <div class="alert alert-danger" ng-show="(clubregistration.address.$dirty || regstate.triedSubmit) && clubregistration.address.$error.required">
          <p>Please enter an address.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="4" label="Bank" elementid="bank" data-help="Leave blank if your organization does not have a bank account.  <em>Do not</em> provide your account number.">
        <input type="text" id="bank" name="bank" class="form-control" placeholder="Name of Bank" data-ng-model="registration.bank">
        <div class="alert alert-danger" ng-show="(clubregistration.ein.$dirty || regstate.triedSubmit) && !registration.bank && registration.ein">
          <p>You have entered an Employer Identification Number.  Please specify which bank services your organization's account, or clear the EIN.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="4" label="EIN" elementid="ein" data-help="Leave blank if your organization does not have a bank account.  If your EIN has not changed since last year, do not modify this field.">
        <input type="text" id="ein" name="ein" class="form-control" placeholder="55-5555555" data-ng-model="registration.ein" data-ng-pattern="/^(\d{2}-\d{7}|[\*]{2}-[\*]{7}|)$/">
        <div class="alert alert-danger" ng-show="(clubregistration.ein.$dirty || regstate.triedSubmit) && registration.bank && ! registration.ein && !regstate.ein">
          <p>If your organization has a bank account, you must provide an EIN.</p>
        </div>
        <div class="alert alert-danger" ng-show="(clubregistration.ein.$dirty || regstate.triedSubmit)&& clubregistration.ein.$error.pattern">
          <p>Please provide EIN in the correct format: XX-XXXXXXX</p>
        </div>
      </div>

  <hr>
      <h2>Categorization</h2>

      <div class="row">

        <div class="col-lg-6 col-md-6 col-sm-6">
          <div class="panel">
            <div class="panel-heading">
              <h4 class="panel-title">SGA Elections</h4>
            </div>
            <div class="panel-body">
              <p class="help-block">Select the <em>one</em> category that best fits your organization for SGA Election purposes.</p>
              <div class="alert alert-danger" ng-show="regstate.triedSubmit && !registration.sgaelection">
                <p>Please select the category that best fits your organization.</p>
              </div>
              <div data-tag-select="" data-radio="true" data-tags="sdrdata.electionTags" data-ng-model="registration.sgaelection"></div>
            </div>
          </div>
        </div>

        <div class="col-lg-6 col-md-6 col-sm-6">
          <div class="panel">
            <div class="panel-heading">
              <h4 class="panel-title">Club Directory Search</h4>
            </div>
            <div class="panel-body">
              <p class="help-block">Select <em>one or more</em> categories that describe your organization.</p>
              <div class="alert alert-danger" ng-show="regstate.triedSubmit && !registration.searchtags">
                <p>Please select one or more categories to assist in searching for your organization.</p>
              </div>
              <div data-tag-select="" data-tags="sdrdata.searchTags" data-cols="3" data-ng-model="registration.searchtags"></div>
            </div>
          </div>
        </div>

      </div>
        
        <hr>
      <h2>Public Profile</h2>
      <p class="help-block">The following information will be displayed publicly when potential members are searching for organizations on the <a href="https://clubconnect.appstate.edu/sdr/clubs" target="_blank">Club Directory</a>.</p>


      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="10" label="Purpose" elementid="purpose">
        <input type="text" id="purpose" name="purpose" class="form-control" placeholder="Copy directly from your organization's constitution." data-ng-model="registration.purpose" data-required>
        <div class="alert alert-danger" ng-show="(clubregistration.purpose.$dirty || regstate.triedSubmit) && clubregistration.purpose.$error.required">
          <p>Please enter the "Purpose" from your organization's constitution into the Purpose field for your public profile.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="10" label="Description" elementid="description">
        <textarea data-ckeditor="" id="description" name="description" class="form-control" data-ng-model="registration.description" rows="20"></textarea>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="10" label="Requirements" elementid="requirements" data-help="What is required of your members?  Please list any dues or minimum service hours, etc.">
        <textarea id="requirements" name="requirements" class="form-control" data-ng-model="registration.requirements" rows="5"></textarea>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="4" label="Meeting Schedule" elementid="meetings">
        <input type="text" id="meetings" name="meetings" class="form-control" data-ng-model="registration.meetings" placeholder="Second Thursday of Every Month at 7pm" data-required>
        <div class="alert alert-danger" ng-show="(clubregistration.meetings.$dirty || regstate.triedSubmit) && clubregistration.meetings.$error.required">
          <p>Please enter a meeting schedule.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="4" label="Meeting Location" elementid="location">
        <input type="text" id="location" name="location" class="form-control" data-ng-model="registration.location" placeholder="John Thomas Hall, room 387" data-required>
        <div class="alert alert-danger" ng-show="(clubregistration.location.$dirty || regstate.triedSubmit) && clubregistration.location.$error.required">
          <p>Please enter a meeting location.</p>
        </div>
      </div>

      <div data-horiz-form-el="" data-label-cols="2" data-control-cols="5" label="Website" elementid="website" help="If you need a website, please fill out a <a href='https://ess.appstate.edu/consultation-form' target='blank'>Website Consultation Form</a>.">
        <input type="text" id="website" name="website" class="form-control" data-ng-model="registration.website" placeholder="http://example.com/club">
      </div>

  <hr>
      <h2>People</h2>

      <div class="panel">
        <div class="panel-heading">
          <h4 class="panel-title">Advisor and Officers</h4>
        </div>
        <div class="panel-body">
          <p>Add the current officers of your organization, including advisor.  This list must at least include president and advisor.  Don't forget to add yourself!</p>
          <ul>
            <li>Please ensure that the <strong>email address</strong> is accurate.  Only <tt>@appstate.edu</tt> email addresses will be accepted.</li>
            <li>Select <strong>officer positions</strong> consistent with the wording in your organization's constitution.</li>
            <li><strong>Administrators</strong> have access to manage your club through ClubConnect.  Indicate who should and should not have this access.  <em>Note: The President and Advisor always have access.</em></li>
            <li><strong>Removed</strong> officers will remain shown but stricken through for your convenience.</li>
            <li><strong>If you have not yet held elections for this year</strong>, please enter the current set of officers for your club.  You will be able to change them through ClubConnect when the election is held.</li>
            <li>After club registration is complete, you will have the opportunity to invite club members from last year to join for this year.</li>
          </ul>

          <div class="alert alert-danger" ng-show="regstate.triedSubmit && validatePeople()">
            <p>{{validatePeople()}}</p>
          </div>
          <table class="table">
            <tr>
              <th>Email</th>
              <th>Advisor / Officer Position</th>
              <th>Administrator</th>
              <th>Actions</th>
            </tr>
            <tr data-ng-repeat="(key, officer) in registration.officers">
              <td data-ng-show="officer.removed">Removed: <strike>{{officer.email}}</strike></td>
              <td data-ng-show="officer.removed"><strike>{{sdrdata.roleLookup[officer.position]}}</strike>
              </td><td data-ng-show="officer.removed"></td>
              <td data-ng-show="officer.removed">
                <button type="button" class="btn btn-primary btn-sm" data-ng-click="sdrapi.undoRemoveOfficer(key)">Undo</button>
              </td>
              <td data-ng-hide="officer.removed"><input type="text" class="form-control" data-ng-model="officer.email" placeholder="Email Address @appstate.edu"></td>
              <td data-ng-hide="officer.removed"><select class="form-control" data-ng-model="officer.position" data-ng-options="role.id as role.title for role in sdrdata.roles" placeholder="Officer Position"></select></td>
              <td data-ng-hide="officer.removed || officer.position == 34 || officer.position == 53">
                <div class="btn-group">
                  <button type="button" class="btn" data-ng-class="officer.admin == 1 && 'btn-primary' || 'btn-default'" data-ng-click="officer.admin = 1">Yes</button>
                  <button type="button" class="btn" data-ng-class="officer.admin == 0 && 'btn-primary' || 'btn-default'" data-ng-click="officer.admin = 0">No</button>
                </div>
              </td>
              <td data-ng-show="!officer.removed && (officer.position == 34 || officer.position == 53)">
                <button type="button" class="btn btn-primary" disabled="disabled">Yes</button>
              </td>
              <td data-ng-hide="officer.removed"><button class="btn btn-danger btn-sm" data-ng-click="sdrapi.removeOfficer(key)"><i class="icon-minus-sign"></i> Remove</button></td>
            </tr>
          <tr>
            <td colspan="4">
              <button type="button" class="btn btn-success" data-ng-click="sdrapi.newOfficer()">Add Officer</button>
            </td>
          </tr>
        </table>
      </div>
    </div>

<hr>
    <h2>Elections</h2>
    <div class="row">
      <div class="col-lg-6 col-md-6">
        <div class="panel">
          <div class="panel-heading">
            <h4 class="panel-title">Election Month</h4>
          </div>
          <div class="panel-body">
            <p class="help-block">Select <em>one or more</em> months in which your organization holds officer elections.</p>
            <div class="alert alert-danger" ng-show="regstate.triedSubmit && !registration.elections">
              <p>Please specify your organization's election month(s).</p>
            </div>
            <div data-tag-select="" data-tags="sdrdata.monthTags" data-cols="3" data-ng-model="registration.elections"></div>
          </div>
        </div>
      </div>
    </div>

<hr>
    <h2>Review and Submit</h2>
    <p>This Club Registration Form will be submitted to the CSIL office for approval.</p>
    <p><button type="button" class="btn btn-primary btn-lg" data-ng-click="sdrapi.submitReg()">Submit Club Registration Form</button></p>

    </div>
  </div>
</form>
